---
import type { Product } from "../data/products";
import { Image } from "astro:assets";

interface Props {
  product: Product | null;
  open: boolean;
  onClose?: () => void;
}

const { product, open } = Astro.props as Props;
---

{
  open && product && (
    <div
      x-data
      x-show="true"
      x-transition.opacity.duration.200ms
      class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"
      @click.self="$dispatch('close-modal')"
      style="backdrop-filter: blur(2px);"
    >
      <div class="bg-white rounded-lg shadow-lg max-w-sm w-full relative">
        <button
          class="absolute top-2 right-2 text-gray-500 hover:text-black text-2xl font-bold"
          @click="$dispatch('close-modal')"
          aria-label="Cerrar"
        >
          Ã—
        </button>
        <Image
          src={product.image}
          alt={product.name}
          class="w-full h-48 object-cover rounded-t-lg"
          widths={[400]}
          height={192}
          sizes="(max-width: 400px) 100vw, 400px"
          loading="lazy"
        />
        <div class="p-4">
          <h2 class="text-xl font-bold mb-2">{product.name}</h2>
          <p class="text-gray-600 mb-2">{product.info}</p>
          <p class="text-secondary font-bold text-lg mb-2">
            ${product.price.toFixed(2)}
          </p>
        </div>
      </div>
    </div>
  )
}
